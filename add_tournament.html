<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Tournament</title>

<style>
body{
    font-family:sans-serif;
    background:#f4f4f4;
    padding:20px;
}

.form-container{
    background:white;
    max-width:500px;
    margin:auto;
    padding:20px;
    border-radius:8px;
}

input{
    width:90%;
    padding:10px;
    margin-bottom:10px;
}

button{
    padding:10px 15px;
    background:#2ecc71;
    color:white;
    border:none;
    cursor:pointer;
}

ul{
    padding-left:20px;
}
</style>
</head>

<body>

<div class="form-container">

<h2>Create Tournament</h2>

<input id="tourneyName" placeholder="Tournament name">

<br>

<input id="teamInput" placeholder="Team name">
<button onclick="addTeam()">+</button>

<ul id="teamList"></ul>

<button onclick="createTournament()">Confirm & Create</button>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyBYFoGEfyxSc_8h_GryQ4HXk9UDZf6I9Vc",
 authDomain: "football-manager-a8c11.firebaseapp.com",
 projectId: "football-manager-a8c11",
 storageBucket: "football-manager-a8c11.firebasestorage.app",
 messagingSenderId: "78452499051",
 appId: "1:78452499051:web:5f26427727d1d17024c72e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

console.log("Firebase connected");

let teams = [];

window.addTeam = () => {

 const input = document.getElementById("teamInput");
 const list = document.getElementById("teamList");

 if(input.value.trim()){
   teams.push(input.value.trim());
   list.innerHTML += `<li>${input.value}</li>`;
   input.value="";
 }
};

window.createTournament = async () => {

 console.log("BUTTON CLICKED");

 const name = document.getElementById("tourneyName").value.trim();

 if(!name || teams.length===0){
   alert("Add tournament name and teams");
   return;
 }

 try{
   const ref = await addDoc(collection(db,"tournaments"),{
     name:name,
     teams:teams
   });

   console.log("SAVED", ref.id);
   alert("Tournament saved!");

   window.location="index.html";

 }catch(e){
   console.error(e);
   alert(e.message);
 }
};

</script>

</body>
</html>ul{
    padding-left:20px;
}
</style>
</head>

<body>

<div class="form-container">

<h2>Create Tournament</h2>

<input id="tourneyName" placeholder="Tournament name">

<br>

<input id="teamInput" placeholder="Team name">
<button onclick="addTeam()">+</button>

<ul id="teamList"></ul>

<button onclick="createTournament()">Confirm & Create</button>

</div>


<script type="module">
    
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyBYFoGEfyxSc_8h_GryQ4HXk9UDZf6I9Vc",
 authDomain: "football-manager-a8c11.firebaseapp.com",
 projectId: "football-manager-a8c11",
 storageBucket: "football-manager-a8c11.firebasestorage.app",
 messagingSenderId: "78452499051",
 appId: "1:78452499051:web:5f26427727d1d17024c72e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let teams = [];

window.addTeam = function(){
 let t = teamInput.value.trim();
 if(t){
   teams.push(t);
   teamList.innerHTML += `<li>${t}</li>`;
   teamInput.value="";
 }
}

window.createTournament = async function(){
 console.log("BUTTON CLICKED");
 let name = tourneyName.value.trim();
 if(!name || teams.length==0){
   alert("Add name and teams");
   return;
 }

 try {
 const ref = await addDoc(collection(db,"tournaments"),{
   name:name,
   teams:teams
 });

 console.log("SAVED", ref.id);

} catch(e){
 console.error("FIREBASE ERROR", e);
 alert(e.message);
    }

 window.location="index.html";
}
    
console.log("SCRIPT LOADED");
</script>

</body>
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyBYFoGEfyxSc_8h_GryQ4HXk9UDZf6I9Vc",
 authDomain: "football-manager-a8c11.firebaseapp.com",
 projectId: "football-manager-a8c11",
 storageBucket: "football-manager-a8c11.firebasestorage.app",
 messagingSenderId: "78452499051",
 appId: "1:78452499051:web:5f26427727d1d17024c72e"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

console.log("Firebase connected");
    </script>
</html>
